{% extends "base.html" %}

{% block links %}
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="/static/style.css?v={{version}}">
<link rel="stylesheet" href="/static/popup.css?v={{version}}">
<script type="text/javascript" src="/static/popup.js?v={{version}}"></script>
<script type="text/javascript" src="/static/map.js?v={{version}}"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
{% end %}

{% block content %}
<div class='bed_map'>
  <h2>ICUBAM</h2>
  <div class='subtitles'>
    <p id="subtitle-cluster" />{{ _('Available beds') }}</p>
    <p id="subtitle-full" />{{ _('Occupied / Total COVID beds') }}</p>
  </div>

  <div id="map"></div>
</div>
{% end %}

{% block scripts %}
<script>
  let data = {% raw data %}
  let center = {% raw center %}
  let showed = new Set()
  let all_showed = false
  let covid = true
  const displayAllText = "{{ _('Display All') }}"
  const showingCovidText = "{{ _('Showing') }}: COVID+"
  const showingNCovidText = "{{ _('Showing') }}: COVID-"
  const displayAllAltText = "{{ _('Click here to display all') }}"
  const covidAltText = "{{ _('Click here to chage bed types') }}"
  function initMap () {
    plotMap(data[covid], center)
  }
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key={{API_KEY}}&callback=initMap">
</script>
{% end %}