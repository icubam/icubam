{% extends "base.html" %}

{% block links %}
<link rel="stylesheet" href="static/map.css?v={{version}}">
<link rel="stylesheet" href="www/static/style.css?v={{version}}">
<link rel="stylesheet" href="www/static/popup.css?v={{version}}">
<script type="text/javascript" src="www/static/popup.js?v={{version}}"></script>
<script type="text/javascript" src="www/static/map.js?v={{version}}"></script>
{% end %}

{% block content %}
<section class="content">
  <div class="container-fluid" id="map">
  </div>
</section>
{% end %}

{% block scripts %}
<script>
  let data = {% raw data %}
  let center = {% raw center %}
  let showed = new Set()
  let all_showed = false
  let covid = true
  const displayAllText = "{{ _('Display all') }}"
  const displayAllAltText = "{{ _('Click here to display all') }}"
  const covidAltText = "{{ _('Click here to chage bed types') }}"
  function initMap () {
    plotMap(data[covid], center)
  }
</script>
<script async defer
  src="https://maps.googleapis.com/maps/api/js?key={{API_KEY}}&callback=initMap">
</script>
{% end %}
