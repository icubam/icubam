{% extends "base.html" %}

{% block links %}
<link rel="stylesheet" href="static/map.css?v={{version}}">
<link rel="stylesheet" href="www/static/style.css?v={{version}}">
<link rel="stylesheet" href="www/static/popup.css?v={{version}}">
<script type="text/javascript" src="www/static/popup.js?v={{version}}"></script>
<script type="text/javascript" src="www/static/map.js?v={{version}}"></script>
{% end %}

{% block content %}
<section class="content">
  <div class="title-box" id="title-box-orig">
    <h2><a href="https://icubam.net">ICUBAM üõèÔ∏è</a></h2>
    <span class="subtitle-covid-status">
      <span class="subtitle-covid-pos" />COVID+</span>
      <span class="subtitle-covid-neg" />COVID-</span>
      <span class="subtitle-covid-all" />All Beds</span>
    </span>
    <span class="subtitle-display-format">
      <span class="subtitle-cluster" />{{ _('Available beds') }}</span>
      <span class="subtitle-full-pos" />{{ _('Occupied / Total COVID+ beds') }}</span>
      <span class="subtitle-full-neg" />{{ _('Occupied / Total COVID- beds') }}</span>
      <span class="subtitle-full-all" />{{ _('Occupied / Total beds') }}</span>    </span>
    </div>
  <div class="container-fluid" id="map">
  </div>
</section>
{% end %}

{% block scripts %}
<script>
  let data = {% raw data %}
  let center = {% raw center %}
  let showed = new Set()
  let all_showed = false
  let covid = true
  const displayAllText = "{{ _('Display All') }}"
  const showingCovidText = "{{ _('Display') }} COVID-"
  const showingNCovidText = "{{ _('Display') }} COVID+"
  const showingAllText = "{{ _('Display') }} All beds"

  const displayAllAltText = "{{ _('Click here to display all') }}"
  const covidAltText = "{{ _('Click here to change bed types') }}"
  function initMap () {
    plotMap(data[covid], center)
  }
</script>
<script async defer
  src="https://maps.googleapis.com/maps/api/js?key={{API_KEY}}&callback=initMap">
</script>
{% end %}
